## HTTP、HTTP2 和 HTTP3(QUIC)、GRPC

### 0.影响一个 HTTP 网络请求的因素主要有两个：【带宽】和【延迟】。

- 带宽

如果说我们还停留在拨号上网的阶段，带宽可能会成为一个比较严重影响请求的问题

- 延迟

        （1）浏览器阻塞
        （2）DNS查询
        （3）建立连接

### 1.HTTP0.9

    请求：由单行指令构成，以唯一可用方法GET开头，其后跟目标资源的路径
    响应：只包含响应文档本身

HTTP/0.9 的响应内容并不包含HTTP头，这意味着只有HTML文件可以传送，无法传输其他类型的文件；也没有状态码或错误代码，一旦出现问题，一个特殊的包含问题描述信息的HTML文件将被发回，供人们查看

### 2.HTTP1.0

    （1）协议版本信息，现在会随着每个请求发送
    （2）状态码，会在响应开始时发送，使浏览器能了解请求执行成功或失败，并相应调整行为
    （3）引入了HTTP头的概念，无论是对于请求还是响应，允许传输元数据
    （4）在新HTTP头的帮助下，具备了传输除纯文本HTML文件以外其他类型文档的能力

### 3.HTTP1.1

    （1）长连接，支持长连接（PersistentConnection）和请求的流水线（Pipelining）处理，在一个TCP连接上可以传送多个HTTP请求和响应
    （2）host头处理，能够使不同域名配置在同一个IP地址的服务器上
    （3）引入内容协商机制，包括语言，编码，类型等，并允许客户端和服务器之间约定以最合适的内容进行交换
    （4）缓存处理，引入额外的缓存控制机制
    （5）支持响应分块，range头域

HTTP1.1存在的问题

    （1）容易触发浏览器 tcp 连接数限制：对于同一个域名，浏览器最多只能同时创建 6~8 个 TCP 连接 (不同浏览器不一样)
    （2）“队头阻塞”问题：

### 4.HTTPS与HTTP的一些区别

    端口：80、443
    HTTPS需要证书
    HTTP运行在TCP上，HTTPS在TCP之上增加了SSL/TLS

### 5.HTTP 2.0

在 HTTP/1.1 协议中 【浏览器客户端在同一时间，针对同一域名下的请求有一定数量限制。超过限制数目的请求会被阻塞】

    （1）多路复用允许同时通过单一的 HTTP/2 连接发起多重的请求-响应消息
    （2）首部压缩（Header Compression）
    （3）服务端推送（Server Push）
    （4）请求优先级（request prioritization）
    （5）新的二进制格式（Binary Format）


### 6.HTTP3

HTTP/3是继HTTP/2即将到来的HTTP网络协议的主要修订版。HTTP/3的要点是它使用名为QUIC的新UDP协议代替TCP

- question

 QUIC如何解决UDP遗留问题

 ### 7.GRPC

 （1）RPC（Remote Procedure Call）远程过程调用

RPC要解决的两个问题：

    1.解决分布式系统中，服务之间的调用问题。（http请求，代理模式也可以实现）
    2.远程调用时，要能够像本地调用一样方便，让调用者感知不到远程调用的逻辑。

- 如何实现RPC？涉及【序列化】和【反序列化】，【网络传输】，【Call ID映射】

- RPC vs Restful？RPC是面向过程，Restful是面向资源

- 要实现一个RPC不算难，难的是实现一个高性能高可靠的RPC框架（🔥🔥🔥）

        （1）既然是分布式了，那么一个服务可能有多个实例，你在调用时，要如何获取这些实例的地址呢？
        （2）那么选哪个调用好呢？这时候就需要负载均衡了，于是你又得考虑如何实现复杂均衡
        （3）总不能每次调用时都去注册中心查询实例列表吧，这样效率多低呀，于是又有了缓存，有了缓存，就要考虑缓存的更新问题
        （4）客户端总不能每次调用完都干等着服务端返回数据吧，于是就要支持异步调用
        （5）服务端的接口修改了，老的接口还有人在用，怎么办？总不能让他们都改了吧？这就需要版本控制了；
        （6）服务端总不能每次接到请求都马上启动一个线程去处理吧？于是就需要线程池；
        （7）服务端关闭时，还没处理完的请求怎么办？是直接结束呢，还是等全部请求处理完再关闭呢？
