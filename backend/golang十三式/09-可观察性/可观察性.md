## 微服务——可观察性

    日志
    链路追踪
    指标（监控）

【MTTR】：描述产品由故障状态转为工作状态时修理时间的平均值

【MTBF】：平均无故障工作时间

## 日志

### 日志级别

    Warning（所有的警告都是错误）
    Fatal（会中断程序执行）
    Error
    Debug（开发人员控制）
    Info（日志记录输出）

为什么Debug级别耗性能

两种处理错误的方式

    （1）wrap向上抛
    （2）处理Error，handle之后，打成info

【Kratos log实现完全看不懂 😅😅😅】

### 日志选型

一个完整的集中式日志系统，需要包含以下几个主要特点：

    收集－能够采集多种来源的日志数据；
    传输－能够稳定的把日志数据传输到中央系统；
    存储－如何存储日志数据；
    分析－可以支持 UI 分析；
    警告－能够提供错误报告，监控机制；



日志格式（json、pb）:time,level,app_id,instance_id

日志从产生到可检索，经历几个阶段

    生产 & 采集
    传输 & 切分
    存储 & 检索


## 链路追踪（TODO 😅）

    Tree
    Span
    Annotation


## 指标（监控）

涉及net、cache、db、rpc监控4个维度的指标：**延迟、流量、错误、饱和度**

    延迟（耗时，需要区分正常还是异常）
    流量（需要覆盖来源，即：caller）
    错误（覆盖错误码或者 HTTP Status Code）
    饱和度（服务容量有多“满”）



