### 2.golang structèƒ½å¦æ¯”è¾ƒ

    åŒä¸€ä¸ªstructçš„ä¸¤ä¸ªå®ä¾‹èƒ½ä¸èƒ½æ¯”è¾ƒï¼Ÿ
    ä¸¤ä¸ªä¸åŒçš„structçš„å®ä¾‹èƒ½ä¸èƒ½æ¯”è¾ƒï¼Ÿ

ï¼ˆ1ï¼‰ åŒä¸€ä¸ªstructçš„ä¸¤ä¸ªå®ä¾‹èƒ½ä¸èƒ½æ¯”è¾ƒ

golangä¸­ï¼Œå“ªäº›æ•°æ®ç±»å‹æ˜¯å¯æ¯”è¾ƒçš„ï¼Œå“ªäº›æ˜¯ä¸å¯æ¯”è¾ƒçš„ï¼š

    å¯æ¯”è¾ƒï¼šIntegerï¼ŒFloating-pointï¼ŒStringï¼ŒBooleanï¼ŒComplex(å¤æ•°å‹)ï¼ŒPointerï¼ŒChannelï¼ŒInterfaceï¼ŒArray
    ä¸å¯æ¯”è¾ƒï¼šSliceï¼ŒMapï¼ŒFunction

- å½“ç»“æ„ä¸åŒ…å«ä¸å¯ç›´æ¥æ¯”è¾ƒæˆå‘˜å˜é‡æ—¶å¯ç›´æ¥æ¯”è¾ƒï¼Œå¦åˆ™ä¸å¯ç›´æ¥æ¯”è¾ƒ

- å½“æˆ‘ä»¬éœ€è¦å¯¹å«æœ‰ä¸å¯ç›´æ¥æ¯”è¾ƒçš„æ•°æ®ç±»å‹çš„ç»“æ„ä½“å®ä¾‹è¿›è¡Œæ¯”è¾ƒæ—¶ï¼Œå¯ä»¥å€ŸåŠ© ã€reflect.DeepEqualã€‘ å‡½æ•°

- reflect.DeepEqual æ˜¯å¦‚ä½•å¯¹å˜é‡è¿›è¡Œæ¯”è¾ƒçš„å‘¢ï¼Ÿ

ï¼ˆ2ï¼‰ä¸¤ä¸ªä¸åŒçš„structçš„å®ä¾‹èƒ½ä¸èƒ½æ¯”è¾ƒ

- å¯é€šè¿‡å¼ºåˆ¶è½¬æ¢æ¥æ¯”è¾ƒ
- å¦‚æœæˆå‘˜å˜é‡ä¸­å«æœ‰ä¸å¯æ¯”è¾ƒæˆå‘˜å˜é‡ï¼Œå³ä½¿å¯ä»¥å¼ºåˆ¶è½¬æ¢ï¼Œä¹Ÿä¸å¯ä»¥æ¯”è¾ƒ

ï¼ˆ3ï¼‰ structå¯ä»¥ä½œä¸ºmapçš„keyä¹ˆ

structå¿…é¡»æ˜¯å¯æ¯”è¾ƒçš„ï¼Œæ‰èƒ½ä½œä¸ºkeyï¼Œå¦åˆ™ç¼–è¯‘æ—¶æŠ¥é”™

```golang
func main() {
	sn1 := struct {
		age  int
		name string
	}{age: 11, name: "qq"}

	sn2 := struct {
		age  int
		name string
	}{age: 11, name: "qq"}
	// ğŸ”¥ğŸ”¥ğŸ”¥ ç»“æ„ä½“æ¯”è¾ƒï¼Œæ¯”è¾ƒå±æ€§çš„é¡ºåºå’Œå€¼ã€‚å±æ€§ä¸­åŒ…å«ä¸èƒ½æ¯”è¾ƒçš„ç±»å‹ï¼Œç»“æ„ä½“ä¸å¯æ¯”è¾ƒ
	if sn1 == sn2 {
		Println("sn1== sn2")
	}
	sm1 := struct {
		age int
		m   map[string]string
	}{age: 11, m: map[string]string{"a": "1"}}
	sm2 := struct {
		age int
		m   map[string]string
	}{age: 11, m: map[string]string{"a": "1"}}
	if sm1 == sm2 {
		Println("sm1== sm2")
	}
}
```


### goåˆæ³•å¸¸é‡

å¸¸é‡ä¸­çš„æ•°æ®ç±»å‹åªå¯ä»¥æ˜¯å¸ƒå°”å‹ã€æ•°å­—å‹ï¼ˆæ•´æ•°å‹ã€æµ®ç‚¹å‹å’Œå¤æ•°ï¼‰å’Œå­—ç¬¦ä¸²å‹

### å¼•ç”¨ç±»å‹å’Œå€¼ç±»å‹

- å€¼ç±»å‹ï¼ˆæ— æ³•æ·»åŠ æ–¹æ³•ï¼Œèµ·åˆ«åå¯ä»¥ã€‚ä¸ºå•¥ğŸ˜… ğŸ˜… ğŸ˜…ï¼‰

ã€æ•°ç»„ã€‘ã€‚ã€stringã€‘æ˜¯å€¼ç±»å‹

- å¼•ç”¨ç±»å‹ï¼ˆæ˜¯å¦èµ‹å€¼ä¸ºnilï¼‰ï¼š

    map
    func
    chan
    sliceåˆ‡ç‰‡ã€‚ä½†æ•°ç»„æ˜¯å€¼ç±»å‹
    pointeræŒ‡é’ˆ


```golang
var x1 = nil // wrong
var x2 interface{} = nil
var x3 string = nil // wrong
var x4 error = nil
```


### golangåˆ‡ç‰‡ç±»å‹å’Œæ•°ç»„ç±»å‹åŒºåˆ«

- åˆ‡ç‰‡å…¶å®æ²¡æœ‰å›ºå®šé•¿åº¦ï¼Œä¸€ä¸ªåˆ‡ç‰‡çš„é•¿åº¦æ²¡æœ‰è¢«å£°æ˜ä¸ºå…¶ç±»å‹çš„ä¸€éƒ¨åˆ†ï¼Œè€Œæ˜¯è¢«ä¿ç•™åœ¨åˆ‡ç‰‡ç»“æ„æœ¬èº«ä¸­å¹¶ä¸”å¯ä»¥é€šè¿‡å†…ç½®å‡½æ•° len æ¥é‡ç½®ä»–ã€‚
- ç”¨ä¸€ä¸ªåˆ‡ç‰‡èµ‹å€¼ç»™å¦ä¸€ä¸ªåˆ‡ç‰‡å¹¶ä¸ä¼šåˆ›å»ºå‰ä¸€ä¸ªåˆ‡ç‰‡çš„å†…å®¹å‰¯æœ¬ï¼Œå› ä¸ºåˆ‡ç‰‡ç±»å‹æ²¡æœ‰ç›´æ¥æ‹¥æœ‰å®ƒçš„å†…å®¹ï¼Œè€Œæ˜¯æ‹¥æœ‰ä¸€ä¸ªã€æŒ‡é’ˆã€‘ï¼Œè€Œè¿™ä¸ªæŒ‡é’ˆæŒ‡å‘åˆ‡ç‰‡ä¸‹æ–¹çš„æ•°ç»„ï¼Œæ•°ç»„å†…çš„å…ƒç´ æ‰æ˜¯åˆ‡ç‰‡çš„å†…å®¹ã€‚

```golang
var a [5]int
fmt.Println(a)
// å£°æ˜è¯­å¥ b:=a å£°æ˜ä¸€ä¸ªæ–°å˜é‡ bï¼Œä¸€ä¸ª [5]int çš„æ•°æ®ç±»å‹ï¼Œå¹¶æŠŠ a çš„å†…å®¹æ‹·è´åˆ° b ä¸­
b := a
// æ›´æ”¹ b ä¸­çš„å€¼å¹¶ä¸ä¼šå¯¹ a ä¸­å†…å®¹é€ æˆå½±å“ï¼Œå› ä¸º a å’Œ b æ˜¯ç‹¬ç«‹çš„
b[0] = 8
fmt.Println(a, b)


var a = []int{1,2,3,4,5}
// a å’Œ b å…±åŒåˆ†äº«åŒä¸€ä¸ªåå°æ•°ç»„
b := a[2:]
// åº•å±‚æ•°ç»„çš„æ›´æ”¹ä¼šç”¨åŒæ—¶å½±å“åˆ° a å’Œ b
b[0] = 0
fmt.Println(a, b) // prints [1 2 0 4 5] [0 4 5]


func negate(s []int) {
	for i := range s {
		s[i] = -s[i]
	}
}

func main() {
	var a = []int{1, 2, 3, 4, 5}
	// ä¼ åˆ‡ç‰‡å˜é‡ç»™å‡½æ•°
	negate(a)
	fmt.Println(a) // prints [-1 -2 -3 -4 -5]
}

// å½“æˆ‘ä»¬èµ‹å€¼ï¼Œæˆªå–ï¼Œä¼ é€’æˆ–è€…è¿”å›ä¸€ä¸ªåˆ‡ç‰‡çš„æ—¶å€™ï¼Œä½ åªæ˜¯åœ¨åˆ›å»ºä¸€ä¸ª slice Header ç»“æ„ä½“ï¼Œè¿™ä¸ªç»“æ„ä½“æœ‰ç€ä¸‰ä¸ªå­—æ®µï¼šæŒ‡å‘åå°æ•°ç»„çš„æŒ‡é’ˆï¼Œå½“å‰é•¿åº¦ lenï¼Œå®¹é‡ cap
// ç¿»è¯‘æˆäººè¯å°±æ˜¯ï¼Œåˆ‡ç‰‡ä¼ å€¼ä¼šå½±å“åŸæ¥çš„æ•°æ®ï¼Œæ•°ç»„ä¸ä¼š
```

### iotaç”¨æ³•

```golang
const (
	x = iota
	y
	z = "zz"
	k
	p = iota
)

func main() {
	// 0 1 zz zz 4
	Println(x, y, z, k, p)
}
```

### å¸¸é‡ä¸å…è®¸ä¿®æ”¹ï¼Œä¹Ÿä¸å…è®¸å–åœ°å€
```golang
const cl = 100

var bl = 123

func main() {
	Println(&bl, bl)
	// cannot take the address of cl
	Println(&cl, cl)
}
```

### ç±»å‹åˆ«åå’Œç±»å‹
```golang
type MyInt1 int
type MyInt2 = int // ğŸ˜… MyInt2å°±æ˜¯intç±»å‹
var i int = 9
// cannot use i (type int) as type MyInt1 in assignment
var i1 MyInt1 = i
var i2 MyInt2 = i
Println(i1, i2)
```

### å˜é‡ä½œç”¨åŸŸ

```golang
var ErrDidNotWork = errors.New("did not work")

func DoTheThing(reallyDoIt bool) (err error) {
	// å› ä¸º if è¯­å¥å—å†…çš„ err å˜é‡ä¼šé®ç½©å‡½æ•°ä½œç”¨åŸŸå†…çš„ err å˜é‡
	if reallyDoIt {
		result, err := tryTheThing()
		if err != nil || result != "it worked" {
			err = ErrDidNotWork
		}
	}
	return err
}
func tryTheThing() (string, error) {
	return "", ErrDidNotWork
}
func main() {
	// è¿”å› nil
	Println(DoTheThing(true))
	Println(DoTheThing(false))
}
```

### é—­åŒ…å»¶è¿Ÿæ±‚å€¼

```golang
func test() []func() {
	var funs []func()
	for i := 0; i < 2; i++ {
		funs = append(funs, func() {
			Println(&i, i)
		})
	}
	return funs
}

func main() {
    funs := test()
    // 0xc0000140a0 2
    // 0xc0000140a0 2
	for _, f := range funs {
		f()
	}
}
// è§£å†³é—­åŒ…å»¶è¿Ÿæ±‚å€¼é—®é¢˜
func test() []func() {
	var funs []func()
	for i := 0; i < 2; i++ {
		x := i
		funs = append(funs, func() {
			Println(&x, x)
		})
	}
	return funs
}
```

```golang
func test(x int) (func(), func()) {
	return func() {
			Println(x)
			x += 10
		}, func() {
			Println(x)
		}
}
func main() {
	a, b := test(100)
	a() // 100
	b() // 110
}
```