## javascript垃圾回收机制

[Garbage collection](https://javascript.info/garbage-collection)

### 垃圾回收算法

- 标记清除

没有被引用的对象就是垃圾，就是要被清除；对于循环引用对象，但根访问不到它们，这几个对象也是垃圾，也要被清除。

- 引用计数

所谓”引用计数”是指语言引擎有一张”引用表”，保存了内存里面所有的资源（通常是各种值）的引用次数。如果一个值的引用次数是0，就表示这个值不再用到了，因此可以将这块内存释放。

### js引擎垃圾回收优化措施

- Generational collection分代回收

对象被分成两组：“新的”和“旧的”。许多物体出现，完成它们的工作并快速死亡，它们可以被积极地清理。那些活得足够长的人会变“老”，并且检查频率较低。

- Incremental collection增量回收

如果有很多对象，并且我们尝试一次遍历并标记整个对象集，则可能需要一些时间并在执行中引入明显的延迟。因此引擎尝试将垃圾收集拆分为多个部分。然后这些部分一个一个地分别执行。这需要它们之间进行一些额外的簿记以跟踪更改，但是我们有许多微小的延迟而不是大的延迟。

- Idle-time collection空闲时间收集

垃圾收集器尝试仅在 CPU 空闲时运行，以减少对执行的可能影响。
