## golang基础

### 1.make和new区别（编译期间和运行时 😅）

https://mp.weixin.qq.com/s/xNdnVXxC5Ji2ApgbfpRaXQ

    make(T) 返回的初始化的 T，只能用于 slice，map，channel
    new 的作用是根据传入的类型分配一片内存空间并返回指向这片内存空间的【指针】

```golang
// new切片返回指针
s := new([]int)
// first argument to append must be slice; have *[]int
s = append(s, 1)
Println(s)
```

### 2.struct{}空结构体

变量大小为0，不占任何内存大小。直接给 zerobase 地址的

- struct作为内置字段

内置字段的场景没有什么特殊的，主要是地址和长度的对齐要考虑。还是只需要注意 3 个要点：

```sh
    空结构体的类型不占内存大小；
    地址偏移要和自身类型对齐；
    整体类型长度要和最长的字段类型长度对齐；
```

- 空结构体 struct{ }  为什么会存在的核心理由就是为了节省内存。当你需要一个结构体，但是却丝毫不关系里面的内容，那么就可以考虑空结构体。golang 核心的几个复合结构 map ，chan ，slice 都能结合 struct{}  使用

```sh
    1.空结构体也是结构体，只是 size 为 0 的类型而已；
    2.所有的空结构体都有一个共同的地址：zerobase 的地址；
    3.空结构体可以作为 receiver ，receiver 是空结构体作为值的时候，编译器其实直接忽略了第一个参数的传递，编译器在编译期间就能确认生成对应的代码；
    4.map 和 struct{} 结合使用常常用来节省一点点内存，使用的场景一般用来判断 key 存在于 map；
    5.chan 和 struct{} 结合使用是一般用于信号同步的场景，用意并不是节省内存，而是我们真的并不关心 chan 元素的值；

```

### 2、数组和切片的区别 

```sh
1. 作为函数参数时，数组值传递，slice引用传递
2. 声明数组时，方括号内写明了数组的长度或使用...自动计算长度，而声明slice时，方括号内没有任何字符
3. 数组长度固定，slice长度可变
```

### 3、for range 的时候它的地址会发生变化么？for 循环遍历 slice 有什么问题？

[for...range语法糖](https://blog.csdn.net/qq_38871968/article/details/111239480)

```sh
    slice := []int{0, 1, 2, 3}
	hash := make(map[int]*int)
	for index, value := range slice {
		// 0 ==> 0
		// 1 ==> 1
		// 2 ==> 2
		// 3 ==> 3
		// v := value
		// hash[index] = &v

		// 0 ==> 3
		// 1 ==> 3
		// 2 ==> 3
		// 3 ==> 3
		hash[index] = &value
	}
	for k, v := range hash {
		fmt.Printf("%d ==> %d\n", k, *v)
	}
```

slice的值并没有改变，原因是因为for range遍历的内容是对原内容的一个拷贝，所以不能用来修改原切片中内容。

```sh
    slice := []int{0, 1, 2, 3}
	for _, value := range slice {
		if value == 1 {
			value = 100
		}
	}
	for k, v := range slice {
		fmt.Printf("%d ==> %d\n", k, v)
	}
```


### 4、go defer，多个 defer 的顺序，defer 在什么时机会修改返回值？（for defer）defer recover 的问题？(主要是能不能捕获)

```sh

```

### 5、 uint 类型溢出
### 6、介绍 rune 类型
### 7、 golang 中解析 tag 是怎么实现的？反射原理是什么？
### 8、调用函数传入结构体时，应该传值还是指针？ （Golang 都是值传递）
### 9、silce 遇到过哪些坑？
### 10、go struct 能不能比较？
### 11、Go 闭包

[闭包应用场景](https://blog.csdn.net/qq_35976351/article/details/82016520)

## context

### 1、context 结构是什么样的？
### 2、context 使用场景和用途？（基本必问）


## Channel 相关：

### 1、channel 是否线程安全？锁用在什么地方？
### 2、go channel 的底层实现原理 （数据结构）
### 3、nil、关闭的 channel、有数据的 channel，再进行读、写、关闭会怎么样？（各类变种题型）
例如：go channel close 后读的问题
向为 nil 的 channel 发送数据会怎么样？
### 4、向 channel 发送数据和从 channel 读数据的流程是什么样的？


## Map 相关：
### 1、map 使用注意的点，并发安全？
### 2、map 循环是有序的还是无序的？
### 3、 map 中删除一个 key，它的内存会释放么？
### 4、怎么处理对 map 进行并发访问？有没有其他方案？ 区别是什么？
### 5、 nil map 和空 map 有何不同？
### 6、map 的数据结构是什么？是怎么实现扩容？
### 7、map 取一个 key，然后修改这个值，原 map 数据的值会不会变化

## GMP 相关：
### 1、什么是 GMP？（必问）调度过程是什么样的？（对流程熟悉，要求更高，问的较少）
### 2、进程、线程、协程有什么区别？
### 3、抢占式调度是如何抢占的？
### 4、M 和 P 的数量问题？
### 5、协程怎么退出？
### 6、map 如何顺序读取？

## 锁相关：
### 1、除了 mutex 以外还有那些方式安全读写共享变量？
### 2、Go 如何实现原子操作？
### 3、Mutex 是悲观锁还是乐观锁？悲观锁、乐观锁是什么？
### 4、Mutex 有几种模式？
### 5、goroutine 的自旋占用资源如何解决
### 6、读写锁底层是怎么实现的？

## 同步原语相关：
### 1、知道哪些 sync 同步原语？各有什么作用？sync.pool 问的相对多些
### 2、sync.WaitGroup

## 并发相关：
### 1、怎么控制并发数？
### 2、多个 goroutine 对同一个 map 写会 panic，异常是否可以用 defer 捕获？
### 3、如何优雅的实现一个 goroutine 池（百度、手写代码）
### 4、select 可以用于什么？
### 5、主协程如何等其余协程完再操作？

## GC 相关：
### 1、go gc 是怎么实现的？（必问）
### 2、go 是 gc 算法是怎么实现的？ （得物，出现频率低）
### 3、GC 中 stw 时机，各个阶段是如何解决的？ （百度）
### 4、GC 的触发时机？


## 内存相关：
### 1、谈谈内存泄露，什么情况下内存会泄露？怎么定位排查内存泄漏问题？
### 2、知道 golang 的内存逃逸吗？什么情况下会发生内存逃逸？
### 3、请简述 Go 是如何分配内存的？Channel 分配在栈上还是堆上？哪些对象分配在堆上，哪些对象分配在栈上？
### 4、介绍一下大对象小对象，为什么小对象多了会造成 gc 压力？
### 5、堆和栈的区别？
### 6、当 go 服务部署到线上了，发现有内存泄露，该怎么处理？

## 其他：
### 1、go 实现单例的方式？
### 2、项目中使用 go 遇到的坑？
