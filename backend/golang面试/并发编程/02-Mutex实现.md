## Mutex实现（ TODO 特别复杂 😅）

【初版】的 Mutex 使用一个 flag 来表示锁是否被持有，实现比较简单；后来照顾到新来的 goroutine，所以会让新的 goroutine 也尽可能地先获取到锁，这是第二个阶段，我把它叫作【给新人机会】；那么，接下来就是第三阶段【多给些机会】，照顾新来的和被唤醒的 goroutine；但是这样会带来饥饿问题，所以目前又加入了饥饿的解决方案，也就是第四阶段【解决饥饿】。

### 初版互斥锁

### 给新人机会

### 多给些机会

### 解决饥饿



### tips

    Mutex和channel实现代码实现非常复杂，第一遍看不懂没关系，第二遍看不懂也没关系......,永远看不懂也不影响你使用它。你可以每次只尝试理解一个知识点。我的经验是多看几遍，每一个if分支都理解它的意思，在纸上画一画state的值的变化


### 思考

（1）目前 Mutex 的 state 字段有几个意义，这几个意义分别是由哪些字段表示的？

（2）等待一个 Mutex 的 goroutine 数最大是多少？是否能满足现实的需求？

