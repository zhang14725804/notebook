面试内容：
一、语言
1. 对golang底层实现较熟悉，问了goroutine,channel,map,gc相关问题。
	基本都能回答上
2. 线程的数量怎么设置
	runtime包里设置线程
3. 如何避免重复关闭channel的情况
	逻辑上做好处理，尽量避免这种情况发送；sync.Once
4. sync.Once底层如何实现
	做了一个标记位，修改后就不再执行
5. 项目上遇到性能问题吗，如何排查
	遇到过死锁问题，看pprof的goroutine页面,看哪两个goroutine的锁是同一个锁
二、中间件
1. 项目上为什么使用mysql，会有性能问题吗
	对实时性要求没有那么高，广告商的数据压力不是那么大，所以不会有问题。
	做了定时任务，定时去查mysql，再将数据处理后发送到检索服务里。
2. mysql执行一条查询语句的过程
	没研究过
3. 为什么使用redis
	性能快，持久化，memcache不能持久化
4. redis的持久化如何实现的
	两种方式，RDB与AOF.
3. Kafka 如何保证消息不丢失
	生成者这边要调整batch大小，尽量保证数据都能发出去，kafka服务端需要开启同步写磁盘，可能会有性能问题。消费者则需要在数据接收处理后在提交offset。
4. 发送失败怎么办
	尽量重试
5. 部分发送失败怎么办
	把失败的部分进行重发，对每条消息生成id
三、网络
1. tcp三次握手，为什么需要三次
	介绍了三次握手流程
2. 断网还能ping通127.0.0.1吗，为什么
	不能，没经过路由，在网卡侧就处理了。
四、算法
1. 求一个整数数组里连续子数组的最大和。给了On2的解法,思路正确,但实际代码未能通过测试。
五、其他
1. 项目中遇到过哪些困难，怎么解决
	之前的项目复杂度比较高，涉及的广告计算公式比较多
2. 最大的长处和弱点
	能很快的理解需求，给出比较快速的解决方案

总结：
面试不通过。候选者回答对golang底层较为熟悉,但实际编程时对问题理解不到位,思路不够清晰.回答问题时会引用项目上的实际情况进行回答,但对常用的组件没有全面的看法与理解,对面试的准备不够充分.


面试内容：
一、语言
1. 对golang底层实现较熟悉，make和new区别, slice扩容, map，mutex+map,sync.map对比, channel，context, reflect， 大部分都能回答上来。
2. 堆栈介绍，逃逸分析，字节对齐，都能回答上来
3, 对比go java区别，
   java效率不高但时间久生态好，go并发简单，官方代码规范，容易部署云原生比价契合

二、中间件
1. 项目上为什么使用了redis, 
   讲了速度快，内存操作等等
2，mysql redis一致性怎么保证
   先删redis再更新数据库最后再判断redis是不是有脏值再删redis
3. redis 分布式锁
   面试者说用setnx 加各种参数实现，不正确，其实是set nx ex.

三、网络
1. grpc
   回答了http2.0+pb等，再问http2解决了什么问题，说了一两点不全面

四、设计模式
   工厂模式，适配器等并说了项目中大概怎么用

五、算法
1. 用协程实现生产者消费者。代码成功运行出结果。

六、项目
1. 推动大版本升级及开发平台的迁移，具体说一下流程？
	主要是从centos迁移到ubnutu，说了中间的流程 
2，项目docker 化的推动实现
   之前是虚拟机开发测试比较麻烦，docker化后优化了整体效率，没用k8s 计划用	
3. 线上遇到的问题
  线上客户现场问题排查分析，通过日志部署模拟很难复现，最后发现是用户时区有夏令时冬令时问题 +24小时，获取时间不对导致大量数据库操作，事务的使用问题导致数据库连接耗尽
4 重构后数据处理效率提升 200% 这个数据怎么来的 
  主要是业务驱动重构非技术，grafna有相应的数据比对 

七，容器
1 docker实现
  说了namespace, cgroup机制
2 k8s
  说了各个基础组件的功能，以及service四层通信 需要加ingress或者其他负载均衡等处理七层通讯 




总结：
面试通过。候选者对golang底层较为熟悉,技术较为全面. 设计模式，网络，算法，线上排查问题等回答的都比较通顺，只有少数的问题盲点.



面试内容：

go 语言:
channel 实现: 是一个队列, 对底层实现不了解
golang gc: 三色标记, 对实现不了解
defer 用法和实现: 栈, 对底层实现不了解

k8s:
较为熟悉, 做过若干云原生相关的运维项目

网络协议:
grpc: 用过, 通过 protobuf 定义协议., sdk 连接使用, 底层实现不了解

项目亮点:
CICD 任务发布平台, 通过 golang 实现, 通过容器化部署, 基于 tekton 的流水线模块, tekton-cli 和 tekton-server 开发, 描述了任务的大致处理逻辑
矿场容器任务的编排调度

工程设计:
负责执行代码编写, 没有负责过复杂需求的分析拆解

技术栈:
19 年之后 go 为主开发语言, 写过 c, rust, 前端语言

算法:
删除链表倒数第n个节点: 没有写出可以运行的代码, 代码思路错误, 提示后优化方案不合格(思路: 通过 map 来存储序列和节点指针, 通过 len(map) - N 查找到对应节点再进行链表节点删除; 要求降低空间复杂度后, 提出将 map 修改成 slice; 帮助理清思路后(两遍遍历), 要求给出一遍遍历的优化方案无法给出)

总结:
对 go 语言底层实现不了解, 准备不充分
有 k8s 的应用经验, 包括容器编排, 云原生项目的二次开发处理
实际编程对问题的理解不到位, 无法给出合理解决方案
对语言和所用工具没有自己的看法和见解



面试内容：

1. 编程题，求整数数组的连续子数组的最大和。
写出o(n3)的解法，测试用例均通过，可以给出o(n)的思路，

2. 介绍了c/c++与golang的区别，gmp调度机制，channel原理，对golang了解深入。

3. 项目上遇到性能问题的排查思路：
缓存数据量限制减小，索引，异步，离线处理。

4. mysql执行一条普通的查询语句的流程是什么
查对应的缓存，优化查询，选择索引，选择查询计划，引擎查数据，

5. 联合索引命中规则
a,b,c三个字段的索引，查询b,c不会命中索引，查询a,c会命中a

6. 介绍一下kafka跟其他的消息队列的区别
kafka接收数据时会将数据写到日志里，保证数据不会丢。
kafka使用层面较为了解，底层具体逻辑讲不清楚

7. 在浏览器中输入url地址，到显示页面的过程， 相关协议属于网络7层的哪一层
先根据域名查询对应ip，查找根服务器，查本地路由，选择网关后进行tcp连接，3次握手，tls握手，确认加密算法后，开始会话	

8. 3次握手流程
客户端发送syn，服务端返回syn-ack与syn，客户端返回syn-ack

9. tcp udp优缺点
tcp有拥塞算法，重传机制，基于连接，保证报文的真实性
udp是非连接，本地不需要维护连接

10. 产生死锁的 4 个必要条件
    a. 互斥条件（Mutual exclusion）：资源不能被共享，只能由一个进程使用。
    b. 请求与保持条件（Hold and wait）:已经得到资源的进程可以再次申请新的资源
    c. 不可剥夺条件（No pre-emption）:已经分配的资源不能从相应的进程中被强制地剥夺
    d. 环路/循环等待条件（Circular wait）:系统中若干进程组成环路，该环路中每个进程都在等待相邻进程正占用的资源

11. 项目中有遇到哪些困难 这种一般是怎么解决
程序中goroutine太多导致程序崩溃
增加context进行管理,对超时的goroutine进行超时关闭.
context怎么关闭？
调用cancel函数

总结：
开发经验丰富，思路清晰，有独立解决问题的能力，面试通过


面试内容：

工作经验:

前期为 ios 客户端开发, 19 年开始 golang 开发, 4 年golang经验.

说出工作经验中遇到的难题与解决思路和结果, 答没有什么亮点和有意思的经验.

go 语言:
channel 有缓存无缓存区别: 阻塞和非阻塞, close() 后动作: 有缓存消费者会消费完数据, 可以接收到关闭信号
new, make 区别: make只可用于slice,map,channel的初始化; new 可以用来分配内存
error 错误处理实践: 开始时使用 pkg/error; 后期使用官方 errors; 跟随项目使用, 不清楚切换的原因

k8s:
熟悉度一般, 会使用框架级别 api, 做过若干游戏方向的部署排障工作(重新部署), 要求说出组件未能答出.

工程设计:
负责执行代码编写, 没有负责过复杂需求的分析拆解.

算法:
删除链表倒数第n个节点: 没有写出可以运行的代码(思路: 通过 map 来存储序列和节点指针, 通过 len(map) - N 查找到对应节点再进行链表节点删除; 要求降低空间复杂度后, 提出将 map 修改成 slice; 帮助理清思路后(两遍遍历), 要求给出一遍遍历的优化方案无法给出)

总结:
对 go 语言使用较为了解
k8s 知识不够充分, 仅仅会简单的框架级api调用
实际编程对问题的理解不到位, 无法给出合理解决方案
对语言和所用工具没有自己的看法和见解


面试内容：
1. 项目涉及的服务组件较多，技术能力范围较广，虽没有深究各组件实现原理，但可见学习能力较强，学习速度较快。
2. 代码题给出O(n2)时间复杂度的解法，编程能力基本过关
3. 咨询了ES聚合相关的步骤逻辑：写脚本从es获取数据，然后经过MapReduce后再Combine，再输出结果。
4. 咨询了gRPC,PostgreSQL,clickhouse的基本实现原理，能给出对基本概念的理解。
5. 咨询了datadog-agent的上报协议内容，通过http发送json或者protobuf，失败时根据状态码重试
6. 咨询了anltr4的实现逻辑
7. 介绍了otel metric以及指标的分类
8. 自身的优缺点：优点是什么都愿意去了解去学习，弱点是不太愿意做重复麻烦的事情

总结：
通过，面试人经验丰富，学习能力强，技术与我们的研究方向贴合。



面试内容:
1. 算法题
两数之和，思路大致正确 没调试出结果。

2. golang相关： slice，channel ，interface底层都不了解，不知道反射，slcie和数组关系不清楚。 gmp 大概能讲出来。mutx场景不清楚

3. 中间件相关: redis 知道几个命令  实现不清楚，mysql 索引原理，建立索引和怎么避免索引失效部分了解，分布式锁不知道。gin 路由不清楚实现。

4. 网络： https过程大致了解，对称/非对成加密对不清楚，http2没听过。用了grpc但是不知道基于http2


面试总结：
不通过。面试的基础问题部分回答不上来，基本没有深入看某一方面，算法题基础编程能力不过关。
