### 数据库表字段设计

**【dbdiagram.id】**——设计数据库

### docker使用

安装docker，postgreSQL数据库镜像，【tablePlus】

docker logs contaninerName/id 查看容器日志

### database migration

[数据库迁移——鸡肋](https://www.cnblogs.com/yjf512/p/6513328.html)

### CRUD，对比db-sql，gorm，sqlx，sqlc

【sqlc】：生成数据库CRUD操作

### Unit testing go database CURD（××）

### db transaction（数据库事务）（××）

【ACID】

### lock & handle deadlock（××）

【for update】：行锁

【外键约束引起死锁 ××××××××】

### how to avoid db deadlock

以一定的顺序获取/释放锁来避免死锁

### transaction Isolation Level事务隔离级别（××）

并发下事务会产生的问题:【脏读】、【不可重复读】、【幻读】、【可序列化】

事务隔离级别：【读未提交】，【读已提交(防止脏读)】，【重复读（防止幻读，会导致序列化异常）】，【串行化（可能导致死锁？）】

MySQL：设置隔离级别，回话级别；

postgreSQL：事务内部设置隔离级别；只有三个隔离级别（没有读未提交）；

【序列化异常现象】使用依赖项检查机制，检测潜在的读取现象并通过抛出异常来阻止（MySQL用锁机制实现）

使用高级别事务隔离界别注意：可能出现错误，超时或者死锁。应该有重试机制

[事务隔离级别](https://www.cnblogs.com/xrq730/p/5087378.html) 

### github actions持续集成

### 来源

[Backend Master Class——Golang + Postgres +Docker](https://www.youtube.com/watch?v=rx6CPDK_5mU&list=PLy_6D98if3ULEtXtNSY_2qN21VCKgoQAE)
