## 阿里云OSS（对象存储服务）

可参考【Go实战仿百度云盘】课程

出于安全考虑：使用子账户控制传输

1. 【前端-->后端-->OSS】上传模式，涉及两次文件传输

2. 【前端直穿OSS】上传模式，前端请求后端，后端返回签名，前端带着签名和文件一起上传给OSS；还有一种【回调模式】，用来处理上传成功之后后端逻辑；需要配置CORS


## 库存服务（😅）

【多个仓库、涉及进销存、支付成功/失败之后库存问题】

设置库存，预扣库存，归还库存（超时），确认扣减库存（支付成功）

### 库存服务表结构（【仓库表】+【商品库存表】+【扣减库存表】）

涉及【批量操作】
    
- 设置库存接口（同一个接口既可以create创建，也可以update更新 😅）

- 扣减库存（查看库存是否足够，）

涉及【MySQL事务 😅😅😅】，事务执行失败需要【事务回滚】，事务必须要在【同一个连接】中才有效，涉及资源竞争【锁】操作

- 库存归还（订单超时、创建订单失败、取消订单（手动归还））