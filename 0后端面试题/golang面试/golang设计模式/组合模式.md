## ç»„åˆæ¨¡å¼

### 1.ç»„åˆæ¨¡å¼æ¦‚å¿µ

    ä¸€ä¸ªå…·æœ‰å±‚çº§å…³ç³»çš„å¯¹è±¡ç”±ä¸€ç³»åˆ—æ‹¥æœ‰çˆ¶å­å…³ç³»çš„å¯¹è±¡é€šè¿‡æ ‘å½¢ç»“æ„ç»„æˆã€‚

ç»„åˆæ¨¡å¼çš„ä¼˜åŠ¿ï¼š

    æ‰€è§å³æ‰€ç ï¼šä½ æ‰€çœ‹è§çš„ä»£ç ç»“æ„å°±æ˜¯ä¸šåŠ¡çœŸå®çš„å±‚çº§å…³ç³»ï¼Œæ¯”å¦‚Uiç•Œé¢ä½ çœŸå®çœ‹åˆ°çš„é‚£æ ·ã€‚
    é«˜åº¦å°è£…ï¼šå•ä¸€èŒè´£ã€‚
    å¯å¤ç”¨ï¼šä¸åŒä¸šåŠ¡åœºæ™¯ï¼Œç›¸åŒçš„ç»„ä»¶å¯è¢«é‡å¤ä½¿ç”¨ã€‚

### 2.ä½¿ç”¨åœºæ™¯

å‰ç«¯å¤§è¡Œç»„ä»¶åŒ–çš„å½“ä»Šï¼Œæˆ‘ä»¬åœ¨å†™åç«¯æ¥å£ä»£ç çš„æ—¶å€™è¿˜æ˜¯æŒ‰ç…§ä¸šåŠ¡æ€è·¯ä¸€å¤´å†™åˆ°å°¾å—ï¼Ÿæˆ‘ä»¬æ˜¯å¦å¯ä»¥æ€ç´¢ï¼Œã€Œåç«¯æ¥å£ä¸šåŠ¡ä»£ç å¦‚ä½•å¯ä»¥ç®€å•å¿«é€Ÿç»„ä»¶åŒ–ï¼Ÿã€ï¼Œç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œè¿™å°±æ˜¯ã€Œç»„åˆæ¨¡å¼ã€çš„ä½œç”¨ã€‚

æˆ‘ä»¬åˆ©ç”¨ã€Œç»„åˆæ¨¡å¼ã€çš„å®šä¹‰å’Œå‰ç«¯æ¨¡å—çš„åˆ’åˆ†å»æ„å»ºåç«¯ä¸šåŠ¡ä»£ç ç»“æ„ï¼š

    å‰ç«¯å•ä¸ªæ¨¡å— -> å¯¹åº”åç«¯ï¼šå…·ä½“å•ä¸ªç±» -> å°è£…çš„è¿‡ç¨‹
    å‰ç«¯æ¨¡å—çˆ¶å­ç»„ä»¶ -> å¯¹åº”åç«¯ï¼šçˆ¶ç±»å†…éƒ¨æŒæœ‰å¤šä¸ªå­ç±»(éç»§æ‰¿å…³ç³»ï¼Œåˆæˆå¤ç”¨å…³ç³») -> çˆ¶å­å…³ç³»çš„æ ‘å½¢ç»“æ„

ä»¥â€œå¤æ‚çš„è®¢å•ç»“ç®—é¡µé¢â€ä¸ºä¾‹ï¼Œä¸‹é¢æ˜¯æŸä¸œçš„è®¢å•ç»“ç®—é¡µé¢ï¼š

![avatar](./è®¢å•ç»“ç®—é¡µé¢.jpeg)

ä»é¡µé¢çš„å±•ç¤ºå½¢å¼ä¸Šï¼Œå¯ä»¥çœ‹å‡ºï¼š

é¡µé¢ç”±å¤šä¸ªæ¨¡å—æ„æˆï¼Œæ¯”å¦‚ï¼š

    åœ°å€æ¨¡å—
    æ”¯ä»˜æ–¹å¼æ¨¡å—
    åº—é“ºæ¨¡å—
    å‘ç¥¨æ¨¡å—
    ä¼˜æƒ åˆ¸æ¨¡å—
    æŸè±†æ¨¡å—
    ç¤¼å“å¡æ¨¡å—
    è®¢å•è¯¦ç»†é‡‘é¢æ¨¡å—

å•ä¸ªæ¨¡å—å¯ä»¥ç”±å¤šä¸ªå­æ¨¡å—æ„æˆï¼›åº—é“ºæ¨¡å—ï¼Œåˆç”±å¦‚ä¸‹æ¨¡å—æ„æˆï¼š

    å•†å“æ¨¡å—
    å”®åæ¨¡å—
    ä¼˜æƒ æ¨¡å—
    ç‰©æµæ¨¡å—

### 3.å¦‚ä½•ä½¿ç”¨ç»„åˆæ¨¡å¼

    ä¸šåŠ¡æ¢³ç†
    ä¸šåŠ¡æµç¨‹å›¾
    ä»£ç å»ºæ¨¡
    ä»£ç 

- ä¸šåŠ¡æ¢³ç†

æŒ‰ç…§å¦‚ä¸ŠæŸä¸œçš„è®¢å•ç»“ç®—é¡µé¢çš„ç¤ºä¾‹ï¼Œæˆ‘ä»¬å¾—åˆ°äº†å¦‚ä¸‹çš„è®¢å•ç»“ç®—é¡µé¢æ¨¡å—ç»„æˆå›¾ï¼š
![avatar](./è®¢å•ç»“ç®—é¡µé¢æ¨¡å—ç»„æˆå›¾.png)

- ä»£ç å»ºæ¨¡

è´£ä»»é“¾æ¨¡å¼ä¸»è¦ç±»ä¸»è¦åŒ…å«å¦‚ä¸‹ç‰¹æ€§ï¼š

æˆå‘˜å±æ€§

    ChildComponents: å­ç»„ä»¶åˆ—è¡¨ -> ç¨³å®šä¸å˜çš„

æˆå‘˜æ–¹æ³•

    Mount: æ·»åŠ ä¸€ä¸ªå­ç»„ä»¶ -> ç¨³å®šä¸å˜çš„
    Remove: ç§»é™¤ä¸€ä¸ªå­ç»„ä»¶ -> ç¨³å®šä¸å˜çš„
    Do: æ‰§è¡Œç»„ä»¶&å­ç»„ä»¶ -> å˜åŒ–çš„

å¥—ç”¨åˆ°è®¢å•ç»“ç®—é¡µé¢ä¿¡æ¯æ¥å£ä¼ªä»£ç å®ç°å¦‚ä¸‹ï¼š

	ä¸€ä¸ªçˆ¶ç±»(æŠ½è±¡ç±»)ï¼š
	- æˆå‘˜å±æ€§
		+ `ChildComponents`: å­ç»„ä»¶åˆ—è¡¨
	- æˆå‘˜æ–¹æ³•
		+ `Mount`: å®ç°æ·»åŠ ä¸€ä¸ªå­ç»„ä»¶
		+ `Remove`: å®ç°ç§»é™¤ä¸€ä¸ªå­ç»„ä»¶
		+ `Do`: æŠ½è±¡æ–¹æ³•

	ç»„ä»¶ä¸€ï¼Œè®¢å•ç»“ç®—é¡µé¢ç»„ä»¶ç±»(ç»§æ‰¿çˆ¶ç±»ã€çœ‹æˆä¸€ä¸ªå¤§çš„ç»„ä»¶)ï¼š 
	- æˆå‘˜æ–¹æ³•
		+ `Do`: æ‰§è¡Œå½“å‰ç»„ä»¶çš„é€»è¾‘ï¼Œæ‰§è¡Œå­ç»„ä»¶çš„é€»è¾‘

	ç»„ä»¶äºŒï¼Œåœ°å€ç»„ä»¶(ç»§æ‰¿çˆ¶ç±»)ï¼š
	- æˆå‘˜æ–¹æ³•
		+ `Do`: æ‰§è¡Œå½“å‰ç»„ä»¶çš„é€»è¾‘ï¼Œæ‰§è¡Œå­ç»„ä»¶çš„é€»è¾‘

	ç»„ä»¶ä¸‰ï¼Œæ”¯ä»˜æ–¹å¼ç»„ä»¶(ç»§æ‰¿çˆ¶ç±»)ï¼š
	- æˆå‘˜æ–¹æ³•
		+ `Do`: æ‰§è¡Œå½“å‰ç»„ä»¶çš„é€»è¾‘ï¼Œæ‰§è¡Œå­ç»„ä»¶çš„é€»è¾‘

	ç»„ä»¶å››ï¼Œåº—é“ºç»„ä»¶(ç»§æ‰¿çˆ¶ç±»)ï¼š
	- æˆå‘˜æ–¹æ³•
		+ `Do`: æ‰§è¡Œå½“å‰ç»„ä»¶çš„é€»è¾‘ï¼Œæ‰§è¡Œå­ç»„ä»¶çš„é€»è¾‘

	ç»„ä»¶äº”ï¼Œå•†å“ç»„ä»¶(ç»§æ‰¿çˆ¶ç±»)ï¼š
	- æˆå‘˜æ–¹æ³•
		+ `Do`: æ‰§è¡Œå½“å‰ç»„ä»¶çš„é€»è¾‘ï¼Œæ‰§è¡Œå­ç»„ä»¶çš„é€»è¾‘

	ç»„ä»¶å…­ï¼Œä¼˜æƒ ä¿¡æ¯ç»„ä»¶(ç»§æ‰¿çˆ¶ç±»)ï¼š
	- æˆå‘˜æ–¹æ³•
		+ `Do`: æ‰§è¡Œå½“å‰ç»„ä»¶çš„é€»è¾‘ï¼Œæ‰§è¡Œå­ç»„ä»¶çš„é€»è¾‘

	ç»„ä»¶ä¸ƒï¼Œç‰©æµç»„ä»¶(ç»§æ‰¿çˆ¶ç±»)ï¼š
	- æˆå‘˜æ–¹æ³•
		+ `Do`: æ‰§è¡Œå½“å‰ç»„ä»¶çš„é€»è¾‘ï¼Œæ‰§è¡Œå­ç»„ä»¶çš„é€»è¾‘

	ç»„ä»¶å…«ï¼Œå‘ç¥¨ç»„ä»¶(ç»§æ‰¿çˆ¶ç±»)ï¼š
	- æˆå‘˜æ–¹æ³•
		+ `Do`: æ‰§è¡Œå½“å‰ç»„ä»¶çš„é€»è¾‘ï¼Œæ‰§è¡Œå­ç»„ä»¶çš„é€»è¾‘

	ç»„ä»¶ä¹ï¼Œä¼˜æƒ åˆ¸ç»„ä»¶(ç»§æ‰¿çˆ¶ç±»)ï¼š
	- æˆå‘˜æ–¹æ³•
		+ `Do`: æ‰§è¡Œå½“å‰ç»„ä»¶çš„é€»è¾‘ï¼Œæ‰§è¡Œå­ç»„ä»¶çš„é€»è¾‘

	ç»„ä»¶åï¼Œç¤¼å“å¡ç»„ä»¶(ç»§æ‰¿çˆ¶ç±»)ï¼š
	- æˆå‘˜æ–¹æ³•
		+ `Do`: æ‰§è¡Œå½“å‰ç»„ä»¶çš„é€»è¾‘ï¼Œæ‰§è¡Œå­ç»„ä»¶çš„é€»è¾‘

	ç»„ä»¶åä¸€ï¼Œè®¢å•é‡‘é¢è¯¦ç»†ä¿¡æ¯ç»„ä»¶(ç»§æ‰¿çˆ¶ç±»)ï¼š
	- æˆå‘˜æ–¹æ³•
		+ `Do`: æ‰§è¡Œå½“å‰ç»„ä»¶çš„é€»è¾‘ï¼Œæ‰§è¡Œå­ç»„ä»¶çš„é€»è¾‘
	ç»„ä»¶åäºŒï¼Œå”®åç»„ä»¶(ç»§æ‰¿çˆ¶ç±»ï¼Œæœªæ¥æ‰©å±•çš„ç»„ä»¶)ï¼š
	- æˆå‘˜æ–¹æ³•
		+ `Do`: æ‰§è¡Œå½“å‰ç»„ä»¶çš„é€»è¾‘ï¼Œæ‰§è¡Œå­ç»„ä»¶çš„é€»è¾‘

golangé‡Œæ²¡æœ‰çš„ç»§æ‰¿çš„æ¦‚å¿µï¼Œè¦å¤ç”¨æˆå‘˜å±æ€§ChildComponentsã€æˆå‘˜æ–¹æ³•Mountã€æˆå‘˜æ–¹æ³•Removeæ€ä¹ˆåŠå‘¢ï¼Ÿæˆ‘ä»¬ä½¿ç”¨åˆæˆå¤ç”¨çš„ç‰¹æ€§å˜ç›¸è¾¾åˆ°â€œç»§æ‰¿å¤ç”¨â€çš„ç›®çš„ï¼Œå¦‚ä¸‹ï¼š

	ä¸€ä¸ªæ¥å£(interface)ï¼š
	+ æŠ½è±¡æ–¹æ³•`Mount`: æ·»åŠ ä¸€ä¸ªå­ç»„ä»¶
	+ æŠ½è±¡æ–¹æ³•`Remove`: ç§»é™¤ä¸€ä¸ªå­ç»„ä»¶
	+ æŠ½è±¡æ–¹æ³•`Do`: æ‰§è¡Œç»„ä»¶&å­ç»„ä»¶

	ä¸€ä¸ªåŸºç¡€ç»“æ„ä½“`BaseComponent`ï¼š
	- æˆå‘˜å±æ€§
		+ `ChildComponents`: å­ç»„ä»¶åˆ—è¡¨
	- æˆå‘˜æ–¹æ³•
		+ å®ä½“æ–¹æ³•`Mount`: æ·»åŠ ä¸€ä¸ªå­ç»„ä»¶
		+ å®ä½“æ–¹æ³•`Remove`: ç§»é™¤ä¸€ä¸ªå­ç»„ä»¶
		+ å®ä½“æ–¹æ³•`ChildsDo`: æ‰§è¡Œå­ç»„ä»¶

	ç»„ä»¶ä¸€ï¼Œè®¢å•ç»“ç®—é¡µé¢ç»„ä»¶ç±»ï¼š 
	- åˆæˆå¤ç”¨åŸºç¡€ç»“æ„ä½“`BaseComponent` 
	- æˆå‘˜æ–¹æ³•
		+ `Do`: æ‰§è¡Œå½“å‰ç»„ä»¶çš„é€»è¾‘ï¼Œæ‰§è¡Œå­ç»„ä»¶çš„é€»è¾‘

	ç»„ä»¶äºŒï¼Œåœ°å€ç»„ä»¶ï¼š
	- åˆæˆå¤ç”¨åŸºç¡€ç»“æ„ä½“`BaseComponent` 
	- æˆå‘˜æ–¹æ³•
		+ `Do`: æ‰§è¡Œå½“å‰ç»„ä»¶çš„é€»è¾‘ï¼Œæ‰§è¡Œå­ç»„ä»¶çš„é€»è¾‘

	ç»„ä»¶ä¸‰ï¼Œæ”¯ä»˜æ–¹å¼ç»„ä»¶ï¼š
	- åˆæˆå¤ç”¨åŸºç¡€ç»“æ„ä½“`BaseComponent` 
	- æˆå‘˜æ–¹æ³•
		+ `Do`: æ‰§è¡Œå½“å‰ç»„ä»¶çš„é€»è¾‘ï¼Œæ‰§è¡Œå­ç»„ä»¶çš„é€»è¾‘

	...ç•¥

	ç»„ä»¶åä¸€ï¼Œè®¢å•é‡‘é¢è¯¦ç»†ä¿¡æ¯ç»„ä»¶ï¼š
	- åˆæˆå¤ç”¨åŸºç¡€ç»“æ„ä½“`BaseComponent` 
	- æˆå‘˜æ–¹æ³•
		+ `Do`: æ‰§è¡Œå½“å‰ç»„ä»¶çš„é€»è¾‘ï¼Œæ‰§è¡Œå­ç»„ä»¶çš„é€»è¾‘

```golang
type Context struct{}

// Component ç»„ä»¶æ¥å£ã€‚Interfaceå®šä¹‰äº†ä¸€ä¸ªæˆ–ä¸€ç»„method(s)ï¼Œè¿™äº›method(s)åªæœ‰å‡½æ•°ç­¾åï¼Œæ²¡æœ‰å…·ä½“çš„å®ç°ä»£ç 
type Component interface {
	// æ·»åŠ ä¸€ä¸ªå­ç»„ä»¶
	Mount(c Component, components ...Component) error
	// ç§»é™¤ä¸€ä¸ªå­ç»„ä»¶
	Remove(c Component) error
	// æ‰§è¡Œç»„ä»¶&å­ç»„ä»¶
	Do(c *Context) error
}

// BaseComponent åŸºç¡€ç»„ä»¶ã€‚å®ç°äº†Componentæ¥å£
type BaseComponent struct {
	ChildComponents []Component
}

// Mount ç¬¬äºŒä¸ªå‚æ•°ä»€ä¹ˆæ„æ€ğŸ˜…ã€‚...Componentå¯å˜å‚æ•°ï¼Œé‚£ä¸ºä»€ä¹ˆä¸ç›´æ¥ç”¨ä¸€ä¸ªå¯å˜å‚æ•°ï¼Œè€Œè¦ç”¨ä¸¤ä¸ªå‚æ•°å‘¢ï¼ˆquestionï¼‰
func (bc *BaseComponent) Mount(c Component, components ...Component) (err error) {
	bc.ChildComponents = append(bc.ChildComponents, c)
	if len(components) == 0 {
		return
	}
	bc.ChildComponents = append(bc.ChildComponents, components...)
	return
}

func (bc *BaseComponent) Remove(c Component) (err error) {
	if len(bc.ChildComponents) == 0 {
		return
	}
	for k, child := range bc.ChildComponents {
		fmt.Println(runFuncName(), "ç§»é™¤ï¼š", reflect.TypeOf(child))
		bc.ChildComponents = append(bc.ChildComponents[:k], bc.ChildComponents[k+1:]...)
	}
	return
}

// æ‰§è¡Œç»„ä»¶&å­ç»„ä»¶
func (bc *BaseComponent) Do(c *Context) (err error) {
	return
}

// æ‰§è¡Œå­ç»„ä»¶
func (bc *BaseComponent) ChildsDo(c *Context) (err error) {
	for _, child := range bc.ChildComponents {
		if err = child.Do(c); err != nil {
			return err
		}
	}
	return
}


/* å…·ä½“ä¸šåŠ¡ */

// è®¢å•ç»“ç®—é¡µé¢ç»„ä»¶
type CheckoutPageComponent struct {
	// åˆæˆå¤ç”¨åŸºç¡€ç»„ä»¶ï¼ˆç”¨ç»„åˆä»£æ›¿ç»§æ‰¿ï¼ˆquestionï¼‰ï¼‰ï¼šæ¯å½“ä¸€ä¸ªç»“æ„å­—æ®µåµŒå…¥åˆ°å¦ä¸€ä¸ªåŸŸä¸­æ—¶, å°±å¯ä»¥é€‰æ‹©è®¿é—®åµŒå…¥å­—æ®µ, å°±åƒå®ƒä»¬æ˜¯å¤–éƒ¨ç»“æ„çš„ä¸€éƒ¨åˆ†ä¸€æ ·
	BaseComponent
}

func (bc *CheckoutPageComponent) Do(c *Context) (err error) {
	// å½“å‰ç»„ä»¶çš„ä¸šåŠ¡é€»è¾‘
	fmt.Println(runFuncName(), "è®¢å•ç»“ç®—é¡µé¢ç»„ä»¶...")
	// æ‰§è¡Œå­ç»„ä»¶ ï¼ˆç›¸å½“äºè°ƒç”¨bc.BaseComponent.ChildsDo(c)ï¼‰
	bc.ChildsDo(c)
	return
}

// åœ°å€ç»„ä»¶
type AddressComponent struct {
	// åˆæˆå¤ç”¨åŸºç¡€ç»„ä»¶
	BaseComponent
}

func (bc *AddressComponent) Do(c *Context) (err error) {
	// å½“å‰ç»„ä»¶çš„ä¸šåŠ¡é€»è¾‘
	fmt.Println(runFuncName(), "åœ°å€ç»„ä»¶...")
	// æ‰§è¡Œå­ç»„ä»¶
	bc.ChildsDo(c)
	return
}

// æ”¯ä»˜æ–¹å¼ç»„ä»¶
type PayMethodComponent struct {
	// åˆæˆå¤ç”¨åŸºç¡€ç»„ä»¶
	BaseComponent
}

func (bc *PayMethodComponent) Do(c *Context) (err error) {
	// å½“å‰ç»„ä»¶çš„ä¸šåŠ¡é€»è¾‘
	fmt.Println(runFuncName(), "æ”¯ä»˜æ–¹å¼ç»„ä»¶...")
	// æ‰§è¡Œå­ç»„ä»¶
	bc.ChildsDo(c)
	return
}

// åº—é“ºç»„ä»¶
type StoreComponent struct {
	// åˆæˆå¤ç”¨åŸºç¡€ç»„ä»¶
	BaseComponent
}

func (bc *StoreComponent) Do(c *Context) (err error) {
	// å½“å‰ç»„ä»¶çš„ä¸šåŠ¡é€»è¾‘
	fmt.Println(runFuncName(), "åº—é“ºç»„ä»¶...")
	// æ‰§è¡Œå­ç»„ä»¶
	bc.ChildsDo(c)
	return
}

// å•†å“ç»„ä»¶
type SkuComponent struct {
	// åˆæˆå¤ç”¨åŸºç¡€ç»„ä»¶
	BaseComponent
}

func (bc *SkuComponent) Do(c *Context) (err error) {
	// å½“å‰ç»„ä»¶çš„ä¸šåŠ¡é€»è¾‘
	fmt.Println(runFuncName(), "å•†å“ç»„ä»¶...")
	// æ‰§è¡Œå­ç»„ä»¶
	bc.ChildsDo(c)
	return
}

// ä¼˜æƒ ä¿¡æ¯ç»„ä»¶
type PromotionComponent struct {
	// åˆæˆå¤ç”¨åŸºç¡€ç»„ä»¶
	BaseComponent
}

func (bc *PromotionComponent) Do(c *Context) (err error) {
	// å½“å‰ç»„ä»¶çš„ä¸šåŠ¡é€»è¾‘
	fmt.Println(runFuncName(), "ä¼˜æƒ ä¿¡æ¯ç»„ä»¶...")
	// æ‰§è¡Œå­ç»„ä»¶
	bc.ChildsDo(c)
	return
}

// ç‰©æµç»„ä»¶
type ExpressComponent struct {
	// åˆæˆå¤ç”¨åŸºç¡€ç»„ä»¶
	BaseComponent
}

func (bc *ExpressComponent) Do(c *Context) (err error) {
	// å½“å‰ç»„ä»¶çš„ä¸šåŠ¡é€»è¾‘
	fmt.Println(runFuncName(), "ç‰©æµç»„ä»¶...")
	// æ‰§è¡Œå­ç»„ä»¶
	bc.ChildsDo(c)
	return
}

// å”®åæœåŠ¡ç»„ä»¶
type AftersaleComponent struct {
	// åˆæˆå¤ç”¨åŸºç¡€ç»„ä»¶
	BaseComponent
}

func (bc *AftersaleComponent) Do(c *Context) (err error) {
	// å½“å‰ç»„ä»¶çš„ä¸šåŠ¡é€»è¾‘
	fmt.Println(runFuncName(), "å”®åæœåŠ¡ç»„ä»¶...")
	// æ‰§è¡Œå­ç»„ä»¶
	bc.ChildsDo(c)
	return
}

// å‘ç¥¨ç»„ä»¶
type InvoiceComponent struct {
	// åˆæˆå¤ç”¨åŸºç¡€ç»„ä»¶
	BaseComponent
}

func (bc *InvoiceComponent) Do(c *Context) (err error) {
	// å½“å‰ç»„ä»¶çš„ä¸šåŠ¡é€»è¾‘
	fmt.Println(runFuncName(), "å‘ç¥¨ç»„ä»¶...")
	// æ‰§è¡Œå­ç»„ä»¶
	bc.ChildsDo(c)
	return
}

// ä¼˜æƒ åˆ¸ç»„ä»¶
type CouponComponent struct {
	// åˆæˆå¤ç”¨åŸºç¡€ç»„ä»¶
	BaseComponent
}

func (bc *CouponComponent) Do(c *Context) (err error) {
	// å½“å‰ç»„ä»¶çš„ä¸šåŠ¡é€»è¾‘
	fmt.Println(runFuncName(), "ä¼˜æƒ åˆ¸ç»„ä»¶...")
	// æ‰§è¡Œå­ç»„ä»¶
	bc.ChildsDo(c)
	return
}

// ç¤¼å“å¡ç»„ä»¶
type GiftCardComponent struct {
	// åˆæˆå¤ç”¨åŸºç¡€ç»„ä»¶
	BaseComponent
}

func (bc *GiftCardComponent) Do(c *Context) (err error) {
	// å½“å‰ç»„ä»¶çš„ä¸šåŠ¡é€»è¾‘
	fmt.Println(runFuncName(), "ç¤¼å“å¡ç»„ä»¶...")
	// æ‰§è¡Œå­ç»„ä»¶
	bc.ChildsDo(c)
	return
}

// è®¢å•é‡‘é¢è¯¦æƒ…ç»„ä»¶
type OrderComponent struct {
	// åˆæˆå¤ç”¨åŸºç¡€ç»„ä»¶
	BaseComponent
}

func (bc *OrderComponent) Do(c *Context) (err error) {
	// å½“å‰ç»„ä»¶çš„ä¸šåŠ¡é€»è¾‘
	fmt.Println(runFuncName(), "è®¢å•é‡‘é¢è¯¦æƒ…ç»„ä»¶...")
	// æ‰§è¡Œå­ç»„ä»¶
	bc.ChildsDo(c)
	return
}

func main() {
	// åˆå§‹åŒ–è®¢å•ç»“ç®—é¡µé¢
	checkoutPage := &CheckoutPageComponent{}
	// æŒ‚è½½å­ç»„ä»¶
	storeComponent := &StoreComponent{}
	skuComponent := &SkuComponent{}

	skuComponent.Mount(
		&PromotionComponent{}, 
		&AftersaleComponent{}
	)
	storeComponent.Mount(
		skuComponent, 
		&ExpressComponent{}
	)

	checkoutPage.Mount(
		&AddressComponent{},
		&PayMethodComponent{},
		storeComponent,
		&InvoiceComponent{},
		&CouponComponent{},
		&GiftCardComponent{},
		&OrderComponent{},
	)
	// ç§»é™¤ç»„ä»¶
	// checkoutPage.Remove(storeComponent)
	checkoutPage.Do(&Context{})
}

func runFuncName() string {
	pc := make([]uintptr, 1)
	runtime.Callers(2, pc)
	f := runtime.FuncForPC(pc[0])
	return f.Name()
}
```

## ç»“è¯­

æœ€åæ€»ç»“ä¸‹ï¼Œã€Œç»„åˆæ¨¡å¼ã€æŠ½è±¡è¿‡ç¨‹çš„æ ¸å¿ƒæ˜¯ï¼š

    æŒ‰æ¨¡å—åˆ’åˆ†ï¼šä¸šåŠ¡é€»è¾‘å½’ç±»ï¼Œæ”¶æ•›çš„è¿‡ç¨‹ã€‚
    çˆ¶å­å…³ç³»(æ ‘)ï¼šæŠŠæ”¶æ•›ä¹‹åçš„ä¸šåŠ¡å¯¹è±¡æŒ‰çˆ¶å­å…³ç³»ç»‘å®šï¼Œä¾æ¬¡è¢«æ‰§è¡Œã€‚

ä¸ã€Œè´£ä»»é“¾æ¨¡å¼ã€çš„åŒºåˆ«ï¼š

    è´£ä»»é“¾æ¨¡å¼: é“¾è¡¨
    ç»„åˆæ¨¡å¼ï¼šæ ‘