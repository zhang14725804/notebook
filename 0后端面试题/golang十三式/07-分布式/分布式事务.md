## 分布式事务

【本地事务 + 消息传递】，数据最终一直

### 事务消息

餐馆吃饭场景：先付钱，收银台发给一张票（凭证，也就是消息），客户拿着票去窗口排队取餐

**如何可靠的保存消息凭证 😅😅😅**

    （1）Transactional outbox
    （2）Polling publisher
    （3）Transaction log tailing
    （4）2PC Message Queue（两阶段提交协议）

事务消息一旦被可靠的持久化，我们整个分布式事务，变为了最终一致性，消息的消费才能保障最终业务数据的完整性，所以我们要尽最大努力，把消息送达到下游的业务消费方，称为：Best Effort。只有消息被消费，整个交易才能算是完整完结。


【Best Effort（尽最大努力交付）】

消息重复投递，【幂等问题】：全局唯一ID + 去重表

【Seata 2PC】分布式事务中间件

【TCC事务】：预处理Try、确认Confirm、撤销Cancel
