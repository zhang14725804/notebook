什么是【优先级】？【优先级】以什么为依据？如何通过【优先级】决定哪个状态应该先被更新？

### 什么是优先级

React将人机交互研究的结果整合到真实的UI中。具体到React运行上这是什么意思呢？

状态更新由用户交互产生，用户心里对交互执行顺序有个预期。React根据人机交互研究的结果中用户对交互的预期顺序为交互产生的状态更新赋予不同优先级。

具体如下：

    生命周期方法：同步执行。
    受控的用户输入：比如输入框内输入文字，同步执行。
    交互事件：比如动画，高优先级执行。
    其他：比如数据请求，低优先级执行

### 如何调度优先级

每当需要调度任务时，React会调用Scheduler提供的方法runWithPriority。

该方法接收一个优先级常量与一个回调函数作为参数。回调函数会以优先级高低为顺序排列在一个定时器中并在合适的时间触发。

### 例子（🔥🔥🔥）

### 如何保证状态正确

（1）render阶段可能被中断。如何保证updateQueue中保存的Update不丢失？

（2）有时候当前状态需要依赖前一个状态。如何在支持跳过低优先级状态的同时保证状态依赖的连续性？